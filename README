Perl benchmark suite
--------------------

This is a perl benchmark suite.  It can be used to compare the
relative speed of different versions of perl.  You run the benchmark
by starting the 'bench' script giving the path-name of various perls
you want to test as argument.

Creating new tests
------------------

The individual tests are found in a directory called "t".  They expect
to be started with a single number as argument.  This number is the
CPU speed factor as calculated by the 'cpu_factor' program.  This
factor is used to scale the number of iterations that the test must
run to give measurable timing.

A new test is created by making a new file under the "t" directory.
The filename should end with the "*.t" suffix.  A test should look
like this:

  # Name: Regexp matching
  # Require: 4

  require 'benchlib.pl';

  # YOUR SETUP CODE HERE
  $a = 0;

  &runtest(100, <<'ENDTEST');
     # YOUR TESTING CODE HERE
     $a++;  # for instance
  ENDTEST

The first part of the test declares some properties of the test.  The
'require' property means that you need a perl with version number
greater or equal to this to run the test (same as the 'require NUM'
does for perl5).  You are advised to write the tests so that they can
run under perl4 as well as perl5.

You should then load the 'benchlib.pl' library.  This will take care
of the command line arguments and also provide the function &runtest()
which will perform the testing.  The first argument is the test scale
factor.  It should be set so that tests take about 10 seconds to run
when given a proper CPU factor argument.  The second argument is the
code you want to test.  The code should be suitable as the body inside
a loop.

If you want to contribute some new tests, please send them to
<gisle@aas.no>.

---------------------------------------------------------------------

© 1997 Gisle Aas. All rights reserved.

This is free software; you can redistribute it and/or modify it under
the same terms as Perl itself.
